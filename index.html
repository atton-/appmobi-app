<!DOCTYPE HTML>
<html lang="ja_JP">
<head>
    <meta charset="UTF-8">
    <title></title>

    <!-- AppMobirライブラリの読み込み -->
    <script type="text/javascript" charset="utf-8" src="http://localhost:58888/_appMobi/appmobi.js"></script>
    <script type="text/javascript" language="javascript">
        document.addEventListener("appMobi.device.ready", function () {
            //AppMobi.display.useViewport(768,1024);
            AppMobi.device.hideSplashScreen();
        main();
        }, false);
    </script> 
    
    <!-- jQuery Mobileライブラリの読み込み -->    
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0rc1/jquery.mobile-1.0rc1.min.css" />
	<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.0rc1/jquery.mobile-1.0rc1.min.js"></script>
    
    <!-- 自分のスタイルをここに設定 -->        
    <style type="text/css">
	#footer {
	    position: absolute;
	    top: 430px;
	    width: 100%;
	}
    </style>
    
    <!-- 以下に自分のプログラムを書く -->            
    <script type="text/javascript">
	var count = 3;
	var beepTime = 5;
	var beep = beepTime;
	var Snooze = 30;
	var Timer = 0;
	
	function main() {
		document.getElementById("but").addEventListener("click",pressButton());
	}

	function pressButton(){
		if(Timer == 0){
			document.getElementById("alert").innerHTML = "zero";
			startTimer();
		}else{
			document.getElementById("alert").innerHTML = "not zero" + Timer;
			stopTimer();
		}
	}
	
	function startTimer(){
		//add setcount
		Timer = setInterval("setMes(clock())",1000);
	}

	function stopTimer(){
		clearInterval(Timer);
		Timer = 0;
		document.getElementById("test").innerHTML = "stoped";
	}


	function setMes(mes){
		document.getElementById("message").innerHTML = mes;
	}

	function clock(){
		if(count > 0){
			count--;
		}else{
			doBeep();
		}
		return count;
	}

	function doBeep(){
		if(beep > 0){
			beep--;
			//alerm
			document.getElementById("test").innerHTML = "beep!" + beep;
		}else{
			//resetting
			count = Snooze;
			beep = beepTime;
			document.getElementById("test").innerHTML = "snooze and tweet";
		}
	}

    </script>    
</head>
<!-- 以下に自分のHTMLを書く -->            
<body>
    <div data-role="pager">
        <div data-role="header"><h1>ねてたー</h1></div>
        <div data-role="content">
			<div data-role="text" id="text"></div>
			<div id="message">ほげ</div>
			<div id="alert">アラート未設定</div>
			<div id="test"></div>
			<div data-role="button" id="but">開始</div>
        </div>
	<div data-role="footer" id="footer">
    </div>

</body>
</html>
